<div class="container pt-50">
    <div class="row">
        <div class="col s6">
            <h1>Mis Portafolios</h1>
        </div>
        <div class="col s6">
            <button type="button" class="col s12 waves-effect waves-light btn red darken-4" (click)="nuevoPortafolio()">Nuevo Portafolio</button>
        </div>
    </div>
    <div class="row">
        <div class="input-field col s6">
            <div class="row">
                <div class="col s12">
                    <mat-form-field appearance="fill">
                        <mat-label>Seleccione Portafolio</mat-label>
                        <mat-select [(ngModel)]="selected" name="portafolio">
                          <mat-option class="not-empty-select" *ngFor="let portafolio of portafolios" [value]="portafolio" >
                            {{portafolio.tipo.toUpperCase()}}
                          </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="col s12">
                    <button type="button" class="col s12 waves-effect waves-light btn red darken-4" (click)="openDialogTDelete(delete)" [disabled]="selected.id == 0">Eliminar Portafolio</button>
                </div>
            </div>
        </div>
        <div class="col s6">
            <div class="row">
                <div class="col s12">
                    <h1>Portafolio: {{selected.tipo | uppercase}}</h1>
                </div>
            </div>
            <div class="row">
                <div class="col s12">
                    <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Precio</mat-label>
                        <mat-icon matPrefix>attach_money</mat-icon>
                        <input matInput [value]="selected?.precio" [(ngModel)]="selected.precio">
                    </mat-form-field>
                </div>
            </div>
            <div class="row">
                <div class="col s12">
                    <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Porcentaje %</mat-label>
                        <span matPrefix> %</span>
                        <input matInput [value]="selected?.porcentaje" [(ngModel)]="selected.porcentaje">
                    </mat-form-field>
                </div>
            </div>
            <div class="row">
                <div class="col s12">
                    <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Puntos</mat-label>
                        <mat-icon matPrefix>exposure_plus_1</mat-icon>
                        <input matInput [value]="selected?.puntos" [(ngModel)]="selected.puntos">
                    </mat-form-field>
                </div>
            </div>
        </div>
    </div>
    <div class="row mb-0">
        <button type="button" class="col s12 waves-effect waves-light btn red darken-4" (click)="openDialogTemplate(myDialog)">Actualizar Portafolio</button>
    </div>
</div>

<ng-template #myDialog>
    <mat-dialog-content>
      <div class="row">
        <p class="red-text" *ngIf="error">Ocurrio un error, intente nuevamente.</p>
        <p class="green-text" *ngIf="exito">Portafolio actualizados correctamente.</p>
      </div>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
      <button mat-button class="col s12 waves-effect waves-light btn red darken-4" mat-dialog-close>Aceptar</button>
    </mat-dialog-actions>
</ng-template>

<ng-template #delete>
    <mat-dialog-content>
      <div class="row">
        <p>¿Seguro desea eliminar el portafolio? Esta opción es irreversible!</p>
      </div>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
        <div class="row">
            <div class="col s6">
                <button mat-button class="w-100 waves-effect waves-light btn red darken-4" mat-dialog-close (click)="deletePortafolio()">Aceptar</button>
            </div>
            <div class="col s6">
                <button mat-button class="w-100 waves-effect waves-light btn red darken-4" mat-dialog-close>Cancelar</button>
            </div>
        </div>
    </mat-dialog-actions>
</ng-template>