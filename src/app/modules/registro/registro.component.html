<h1 class="center-align" *ngIf="!id">Se parte de Asin Network Argentina</h1>
<h1 class="center-align" *ngIf="id">Asociar a nuevo usuario</h1>
<div class="container">
    <div class="row">
        <div class="col s6">
            <mat-form-field class="example-full-width">
                <mat-label>Usuario</mat-label>
                <input matInput [(ngModel)]="usuario.username" (focusout)="verificarUsuario()">
            </mat-form-field>
            <span class="red-text" *ngIf="error">El usuario ya existe</span>
        </div>
        <div class="col s6">
            <mat-form-field class="example-full-width">
                <mat-label>Password</mat-label>
                <input matInput type="password" [(ngModel)]="usuario.password">
            </mat-form-field>
        </div>
    </div>
    <div class="row">
        <div class="col s6">
            <mat-form-field class="example-full-width">
                <mat-label>Nombre</mat-label>
                <input matInput [(ngModel)]="usuario.nombre">
            </mat-form-field>
        </div>
        <div class="col s6">
            <mat-form-field class="example-full-width">
                <mat-label>Apellido</mat-label>
                <input matInput [(ngModel)]="usuario.apellido">
            </mat-form-field>
        </div>
    </div>
    <div class="row">
        <div class="col s6">
            <mat-form-field class="example-full-width">
                <mat-label>Documento</mat-label>
                <input matInput [(ngModel)]="usuario.documento">
            </mat-form-field>
        </div>
        <div class="col s6">
            <mat-form-field class="example-full-width">
                <mat-label>Email</mat-label>
                <input matInput type="email" [(ngModel)]="usuario.email">
            </mat-form-field>
        </div>
    </div>
    <div class="row">
        <div class="col s6">
            <mat-label>Foto del Documento (Frente)</mat-label>
            <button type="button" class="col s12 waves-effect waves-light btn red darken-4" (click)="dniFrente.click()">Subir Imagen</button>
            <mat-progress-bar color="primary"
            mode="determinate"
            [value]="progressFrente"></mat-progress-bar>
            <input hidden type="file" #dniFrente mat-raised-button accept="image/*" (change)="readThis($event,'frente')">
        </div>
        <div class="col s6">
            <mat-label>Foto del Documento (Dorso)</mat-label>
            <button type="button" class="col s12 waves-effect waves-light btn red darken-4" (click)="dniDorso.click()">Subir Imagen</button>
            <mat-progress-bar color="primary"
            mode="determinate"
            [value]="progressDorso"></mat-progress-bar>
            <input hidden type="file" #dniDorso mat-raised-button accept="image/*" (change)="readThis($event,'dorso')">
        </div>
    </div>

    <div class="row">
        <div class="col s6">
            <mat-form-field class="example-full-width">
                <mat-label>Domicilio Legal</mat-label>
                <input matInput [(ngModel)]="usuario.domicilio">
            </mat-form-field>
        </div>
        <div class="col s6">
            <mat-form-field class="example-full-width">
                <mat-label>Teléfono</mat-label>
                <input matInput [(ngModel)]="usuario.telefono">
            </mat-form-field>
        </div>
    </div>
    <div class="row">
        <div class="col s6">
            <mat-form-field class="example-full-width">
                <mat-label>Banco</mat-label>
                <input matInput [(ngModel)]="usuario.banco">
            </mat-form-field>
        </div>
        <div class="col s6">
            <mat-form-field >
                <mat-label>Posición de la nueva cuenta (izquierda/derecha)</mat-label>
                <mat-select [(value)]="usuario.posicion">
                    <mat-option *ngFor="let posicion of posiciones" [value]="posicion">
                        {{posicion}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
    </div>
    <div class="row">
        <div class="col s12">
            <mat-form-field class="example-full-width">
                <mat-label>Número de Cuenta Bancaria</mat-label>
                <input matInput [(ngModel)]="usuario.numero_cuenta">
            </mat-form-field>
        </div>
    </div>
    <div class="row">
        <span class="red-text" *ngIf="disabled">Debe llenar todos los campos</span>
    </div>
    <div class="row">
        <button type="submit" *ngIf="!id" class="col s12 waves-effect waves-light btn red darken-4" (click)="enviarDatos()" [disabled]="error">Registrarme</button>
        <button type="submit" *ngIf="id" class="col s12 waves-effect waves-light btn red darken-4" (click)="comprobarUsuario()" [disabled]="error || disabled">Asociar Usuario</button>
    </div>
</div>